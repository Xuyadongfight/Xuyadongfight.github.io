---
layout: post
title: SSH连接错误
subtitle: SSH连接错误
categories: 其它
tags: [SSH,git]
---
**Warning: Remote Host Identification Has Changed**

## 这个错误是什么
链接到web服务器的最安全的方法之一是使用SSH，它是一个命令行工具，可以让你安全的访问不安全的网络。只要你有正确的登录凭证，你几乎可以在任何可以使用互联网的地方访问你的网站。此外，大多数macOS和Linux机器都在操作系统中内置了SSH客户端。
至于警告:远程主机标识已更改错误，它与客户端将执行的安全检查有关。SSH链接使用专用的秘钥-存储在计算机上的小文件-作为身份验证。它有点像安全套接字层SSL握手，实际上，SSH和SSL之间有一些高级的相似之处。
秘钥的一个帮助是提供其主机服务器的永久指纹。这将确保链接是准确的，并且你不会受到中间机器的攻击。
如果客户端认为这些指纹与它所理解的正确的指纹不同，你将在登录时得到“警告:远程主机标识已更改”错误。
![IMAGE](/assets/images/resources/B4AEE4275513A1DE6A58889C222EEA57.jpg)
随着错误的发生，这是详细而清晰的——它告诉你发生了什么，潜在的原因，以及如何修复它。
但是，在向你展示如何修复“警告:远程主机标识已更改”错误之前，我们可以进一步讨论一个方面。

## known_hosts文件如何帮助SSH认证
你会注意到错误消息引用了一个known_hosts文件。这个名称应该能让你知道它包含了什么，但为了清楚起见，它是计算机已知的SSH远程主机列表。它被用作身份验证过程的参考客户端文件。
当你第一次连接到服务器时，通常会通过接口收到确认请求，询问你是否想要连接。如果是这样，这个指纹将成为known_hosts文件的一部分。
当然，如果指纹与known_hosts文件中的指纹不同，这可能表明有恶意用户正在针对你。在其他情况下，你可能已经知道为什么会有不同，尽管无论如何都要保持警惕。

## 怎么解决这个错误
你可以修复Windows和macOS的“警告:远程主机标识已更改”错误。但是，在Mac上这样做有更大的灵活性。

---

* ## 重要的是除非你完全确信该问题不是恶意的，否则不应尝试修复错误。如果你确定没有安全风险威胁到你的连接，那么以下步骤适合你。

---

### Mac
Mac有几种方法来修复“警告:远程主机标识已更改”错误-要么通过高级应用程序，如SSH配置编辑器或终端。结果是一样的，所以我们建议你选择更舒适的选项。
我们的首选方法是在终端窗口(如果你使用的是iTerm2)中访问文件，也可以用专用的Nano或Vim编辑器打开它。这是因为它对每个人都是可访问的，并且无论您的经验水平如何，都可以直接使用。
这里，我们将使用Nano。首先，使用最舒适的程序打开终端:
![IMAGE](/assets/images/resources/7726BCB6B8ACB0DFA3A011B274CA60DD.jpg)
从这里，运行nano ~/.ssh/known_hosts命令。这将打开一个新的Nano实例，并在known_hosts文件中显示密钥:
![IMAGE](/assets/images/resources/93A9CCE4F67C0FBBB31CA87195A13B50.jpg)
你应该删除导致“警告:远程主机标识已更改”错误的键，然后保存更改。
你可能还想删除整个known_hosts文件，特别是如果你只对一个或两个站点使用SSH。为此，你可以在终端窗口中运行rm .ssh/known_hosts
还有一种方法可以在Mac上修改known_hosts文件:从命令行使用ssh-keygen实用程序。如果你不想深入文件本身，或者你只想使用一个站点或密钥，这是非常好的。
要实现这一点，打开一个终端窗口并运行ssh-keygen，然后输入服务器主机名。例如:
 ![IMAGE](/assets/images/resources/13BAE3ABDB0924167A769E003C04692E.jpg)
它不会询问你是否要删除指定的行，所以在继续之前确保你删除了正确的行:
![IMAGE](/assets/images/resources/0B0E8708E7AFAAB5816874942744E8D4.jpg)
完成此操作后，你就不应该得到“警告:远程主机标识已更改”错误。

## 总结
Web安全不仅仅是安装插件和创建一个强大的密码。你用于登录服务器的连接需要高度注意。如果你不想受到中间机器攻击，那么在登录时就需要使用SSH访问。
然而，这个系统运行得太好了。由于一些原因，您可能会看到“警告:远程主机标识已更改”错误，有些原因是无辜的。
无论如何，你可以通过命令提示符或终端立即修复错误，只需使用少量命令。

问题也找到了，因为GitHub更新了RSA SSH host key。
![IMAGE](/assets/images/resources/9B4324906A1D306021A3AB45074BDE4C.jpg)
 
---

引用:
https://kinsta.com/knowledgebase/warning-remote-host-identification-has-changed/
